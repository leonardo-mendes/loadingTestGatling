package simulation

import io.gatling.core.Predef._
import io.gatling.core.structure.ScenarioBuilder
import io.gatling.http.Predef._
import io.gatling.http.protocol.HttpProtocolBuilder
import util.Constants

// Scala
class CreateUserSimulation extends Simulation {

  private val httpProtocol: HttpProtocolBuilder = http
    .baseUrl("https://workflow-bff.private.dev.cvortex.io:8443")
    .acceptHeader(Constants.JSON_CONTENT_TYPE)

  private val token: String = " Bearer eyJraWQiOiJpYW0tYXV0aC1hcGkiLCJ0eXAiOiJKV1QiLCJhbGciOiJSUzUxMiJ9.eyJhdXRob3JpemF0aW9uIjp7InBlcm1pc3Npb25zIjpbImFndyIsImFndy52aWV3IiwiYWdlbnRzdGF0dXMiLCJhZ2VudHN0YXR1cy5yZWFkIiwiYWdlbnRzdGF0dXMuY3JlYXRlIiwiYWdlbnRzdGF0dXMudXBkYXRlIiwiYWdlbnRzdGF0dXMuZGVsZXRlIiwiY3NtYW5hbHl0aWNzIiwiY3NtYW5hbHl0aWNzLnZpZXciLCJ0ZWFtIiwidGVhbS5yZWFkIiwidGVhbS5jcmVhdGUiLCJ0ZWFtLnVwZGF0ZSIsInRlYW0uZGVsZXRlIiwicGVyc29uIiwicGVyc29uLnJlYWQiLCJwZXJzb24uY3JlYXRlIiwicGVyc29uLnVwZGF0ZSIsInBlcnNvbi5zY3JlZW4iLCJwZXJzb24uZGVsZXRlIiwid29ya2Zsb3ciLCJ3b3JrZmxvdy5yZWFkIiwid29ya2Zsb3cuY3JlYXRlIiwid29ya2Zsb3cuZXhlY3V0ZSIsImNhc2UuY2xvc2UiLCJjYXNlLmNsb3NlLmV4ZWN1dGUiLCJxdWV1ZSIsInF1ZXVlLnJlYWQiLCJxdWV1ZS5jcmVhdGUiLCJxdWV1ZS51cGRhdGUiLCJxdWV1ZS5kZWxldGUiLCJjYXNlYWN0aW9uIiwiY2FzZWFjdGlvbi5yZWFkIiwiY2FzZWFjdGlvbi5jcmVhdGUiLCJjYXNlYWN0aW9uLnVwZGF0ZSIsImNhc2VhY3Rpb24uZGVsZXRlIiwicGVybWlzc2lvbmdyb3VwIiwicGVybWlzc2lvbmdyb3VwLnJlYWQiLCJwZXJtaXNzaW9uZ3JvdXAuY3JlYXRlIiwicGVybWlzc2lvbmdyb3VwLnVwZGF0ZSIsInBlcm1pc3Npb25ncm91cC5zY3JlZW4iLCJwZXJtaXNzaW9uZ3JvdXAuZGVsZXRlIiwiZGF0YW1vZGVsZXIiLCJkYXRhbW9kZWxlci52aWV3IiwiZGF0YW1vZGVsZXIuYWRtaW4iLCJjYXNlIiwiY2FzZS5yZWFkIiwiY2FzZS5jcmVhdGUiLCJjYXNlLnVwZGF0ZSIsImNhc2UuZGVsZXRlIiwiY2FzZXN0YXR1cyIsImNhc2VzdGF0dXMucmVhZCIsImNhc2VzdGF0dXMuY3JlYXRlIiwiY2FzZXN0YXR1cy51cGRhdGUiLCJjYXNlc3RhdHVzLmRlbGV0ZSIsImNhc2UucmVvcGVuIiwiY2FzZS5yZW9wZW4uZXhlY3V0ZSIsImNvbnZlcnNhdGlvbnMiLCJjb252ZXJzYXRpb25zLnZpZXciLCJjb252ZXJzYXRpb25zLmFkbWluIiwic2xhIiwic2xhLnJlYWQiLCJzbGEuY3JlYXRlIiwic3VydmV5Iiwic3VydmV5LnJlYWQiLCJzdXJ2ZXkuY3JlYXRlIiwic3VydmV5LnVwZGF0ZSIsInN1cnZleS5kZWxldGUiLCJhY3Rpb25mb3JtIiwiYWN0aW9uZm9ybS5yZWFkIiwiYWN0aW9uZm9ybS5jcmVhdGUiLCJhY3Rpb25mb3JtLnVwZGF0ZSIsImFjdGlvbmZvcm0uZGVsZXRlIiwiY2hhbm5lbCIsImNoYW5uZWwucmVhZCIsImNoYW5uZWwuY3JlYXRlIiwiY2hhbm5lbC51cGRhdGUiLCJjaGFubmVsLmRlbGV0ZSIsImNhc2ViYXRjaCIsImNhc2ViYXRjaC5yZWFkIiwiY2FzZWJhdGNoLmNyZWF0ZSIsImNhc2ViYXRjaC51cGRhdGUiLCJjYXNlYmF0Y2guZGVsZXRlIiwidXNlciIsInVzZXIucmVhZCIsInVzZXIuY3JlYXRlIiwidXNlci51cGRhdGUiLCJ1c2VyLnNjcmVlbiIsInVzZXIuZGVsZXRlIiwiY2FzZXJlYXNvbiIsImNhc2VyZWFzb24ucmVhZCIsImNhc2VyZWFzb24uY3JlYXRlIiwiY2FzZXJlYXNvbi51cGRhdGUiLCJjYXNlcmVhc29uLmRlbGV0ZSIsInBlcm1pc3Npb24iLCJwZXJtaXNzaW9uLnJlYWQiLCJwZXJtaXNzaW9uLmNyZWF0ZSIsInBlcm1pc3Npb24udXBkYXRlIiwicGVybWlzc2lvbi5kZWxldGUiLCJjYXNldHlwZSIsImNhc2V0eXBlLnJlYWQiLCJjYXNldHlwZS5jcmVhdGUiLCJjYXNldHlwZS51cGRhdGUiLCJjYXNldHlwZS5kZWxldGUiLCJjYXNlb3JpZ2luIiwiY2FzZW9yaWdpbi5yZWFkIiwiY2FzZW9yaWdpbi5jcmVhdGUiLCJjYXNlb3JpZ2luLnVwZGF0ZSIsImNhc2VvcmlnaW4uZGVsZXRlIiwiY2FzZWZvcm0iLCJjYXNlZm9ybS5yZWFkIiwiY2FzZWZvcm0uY3JlYXRlIiwiY2FzZWZvcm0udXBkYXRlIiwiY2FzZWZvcm0uZGVsZXRlIiwiYnVzaW5lc3N1bml0IiwiYnVzaW5lc3N1bml0LnJlYWQiLCJidXNpbmVzc3VuaXQuY3JlYXRlIiwiYnVzaW5lc3N1bml0LnVwZGF0ZSIsImJ1c2luZXNzdW5pdC5zY3JlZW4iLCJidXNpbmVzc3VuaXQuZGVsZXRlIiwiY2FzZS5yZWNsYXNzaWZ5IiwiY2FzZS5yZWNsYXNzaWZ5LmV4ZWN1dGUiLCJjb21wYW55IiwiY29tcGFueS5yZWFkIiwiY29tcGFueS5jcmVhdGUiLCJjb21wYW55LnVwZGF0ZSIsImNvbXBhbnkuc2NyZWVuIiwiY29tcGFueS5kZWxldGUiLCJhcHBzdHVkaW8iLCJhcHBzdHVkaW8uYWRtaW4iLCJjYXNlLnVuYXNzaWduZWQiLCJjYXNlLnVuYXNzaWduZWQuZXhlY3V0ZSIsImNhc2UudW5hc3NpZ24iLCJjYXNlLnVuYXNzaWduLmV4ZWN1dGUiLCJjYXNlZXhwb3J0ZXIiLCJjYXNlZXhwb3J0ZXIucmVhZCIsImNhc2VleHBvcnRlci5leGVjdXRlIiwibWFpbGluZyIsIm1haWxpbmcucmVhZCIsIm1haWxpbmcuY3JlYXRlIiwibWFpbGluZy51cGRhdGUiLCJtYWlsaW5nLmRlbGV0ZSIsImRpc3RyaWJ1dGlvbnJ1bGUiLCJkaXN0cmlidXRpb25ydWxlLnJlYWQiLCJkaXN0cmlidXRpb25ydWxlLmNyZWF0ZSIsImRpc3RyaWJ1dGlvbnJ1bGUudXBkYXRlIiwiZGlzdHJpYnV0aW9ucnVsZS5kZWxldGUiLCJjc213IiwiY3Ntdy52aWV3IiwiZW50aXR5IiwiZW50aXR5LnJlYWQiLCJlbnRpdHkuY3JlYXRlIiwiZW50aXR5LnVwZGF0ZSIsImVudGl0eS5kZWxldGUiLCJEZWZhdWx0IFJlc291cmNlIl19LCJzdWIiOiI3NzhjM2QwNy1lYTg5LTQxZTAtYWVmYS1mNzQzMDliNjNiNWUiLCJuYmYiOjAsImlzcyI6Imp3dC1hdXRob3JpdHkuY3ZvcnRleC5pbyIsInRlbmFudElkIjoiNWU3M2M4MWE0ZWEzY2Q1NGU0OGEzZDdiIiwidHlwIjoiQmVhcmVyIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiYWRtaW4uY3ZvcnRleCIsImV4cCI6MTY1Mjg1NTUzOCwibG9jYWxlIjoicHRfQlIiLCJpYXQiOjE2NTI4MTk1MzgsImtleWNsb2FrX3Rva2VuIjoiZXlKaGJHY2lPaUpTVXpJMU5pSXNJblI1Y0NJZ09pQWlTbGRVSWl3aWEybGtJaUE2SUNKd2VFbFFhMWxSY0ZGVlpHTXplQzFrYUZoWFRIcExlSFYyUW04MVYwVlBOamQwYVdOUlVVNHllamhOSW4wLmV5SnFkR2tpT2lKaFpqZ3pPVGRqTkMxbFl6UmpMVFJoTldNdFlqZzNNQzFrTnpaalpqaGtZVGt4TURNaUxDSmxlSEFpT2pFMk5USTROVFUxTXpnc0ltNWlaaUk2TUN3aWFXRjBJam94TmpVeU9ERTVOVE00TENKcGMzTWlPaUpvZEhSd2N6b3ZMMnRsZVdOc2IyRnJMbkJ5YVhaaGRHVXViMjV3Y21WdExtTjJiM0owWlhndWFXODZPRFEwTXk5aGRYUm9MM0psWVd4dGN5ODFaVGN6WXpneFlUUmxZVE5qWkRVMFpUUTRZVE5rTjJJaUxDSmhkV1FpT2xzaWNtVmhiRzB0YldGdVlXZGxiV1Z1ZENJc0ltRmpZMjkxYm5RaVhTd2ljM1ZpSWpvaU56YzRZek5rTURjdFpXRTRPUzAwTVdVd0xXRmxabUV0WmpjME16QTVZall6WWpWbElpd2lkSGx3SWpvaVFtVmhjbVZ5SWl3aVlYcHdJam9pWTNadmNuUmxlQzFoWkdGd2RHVnlJaXdpWVhWMGFGOTBhVzFsSWpvd0xDSnpaWE56YVc5dVgzTjBZWFJsSWpvaVlqRmpOR0ppWVRRdFpEUTJOQzAwTUdFekxXRXpaRFV0Tm1aa05tRTRPV1kwWmpFeUlpd2lZV055SWpvaU1TSXNJbUZzYkc5M1pXUXRiM0pwWjJsdWN5STZXMTBzSW5KbFlXeHRYMkZqWTJWemN5STZleUp5YjJ4bGN5STZXeUp2Wm1ac2FXNWxYMkZqWTJWemN5SXNJblZ0WVY5aGRYUm9iM0pwZW1GMGFXOXVJbDE5TENKeVpYTnZkWEpqWlY5aFkyTmxjM01pT25zaWNtVmhiRzB0YldGdVlXZGxiV1Z1ZENJNmV5SnliMnhsY3lJNld5SjJhV1YzTFdsa1pXNTBhWFI1TFhCeWIzWnBaR1Z5Y3lJc0luWnBaWGN0Y21WaGJHMGlMQ0p0WVc1aFoyVXRhV1JsYm5ScGRIa3RjSEp2ZG1sa1pYSnpJaXdpYVcxd1pYSnpiMjVoZEdsdmJpSXNJbkpsWVd4dExXRmtiV2x1SWl3aVkzSmxZWFJsTFdOc2FXVnVkQ0lzSW0xaGJtRm5aUzExYzJWeWN5SXNJbkYxWlhKNUxYSmxZV3h0Y3lJc0luWnBaWGN0WVhWMGFHOXlhWHBoZEdsdmJpSXNJbkYxWlhKNUxXTnNhV1Z1ZEhNaUxDSnhkV1Z5ZVMxMWMyVnljeUlzSW0xaGJtRm5aUzFsZG1WdWRITWlMQ0p0WVc1aFoyVXRjbVZoYkcwaUxDSjJhV1YzTFdWMlpXNTBjeUlzSW5acFpYY3RkWE5sY25NaUxDSjJhV1YzTFdOc2FXVnVkSE1pTENKdFlXNWhaMlV0WVhWMGFHOXlhWHBoZEdsdmJpSXNJbTFoYm1GblpTMWpiR2xsYm5Seklpd2ljWFZsY25rdFozSnZkWEJ6SWwxOUxDSmhZMk52ZFc1MElqcDdJbkp2YkdWeklqcGJJbTFoYm1GblpTMWhZMk52ZFc1MElpd2liV0Z1WVdkbExXRmpZMjkxYm5RdGJHbHVhM01pTENKMmFXVjNMWEJ5YjJacGJHVWlYWDE5TENKelkyOXdaU0k2SW1WdFlXbHNJSEJ5YjJacGJHVWlMQ0psYldGcGJGOTJaWEpwWm1sbFpDSTZabUZzYzJVc0luSmxZV3h0VG1GdFpTSTZJalZsTnpOak9ERmhOR1ZoTTJOa05UUmxORGhoTTJRM1lpSXNJblJsYm1GdWRFbGtJam9pTldVM00yTTRNV0UwWldFelkyUTFOR1UwT0dFelpEZGlJaXdpYm1GdFpTSTZJbU4yYjNKMFpYZ2dZV1J0YVc0aUxDSndjbVZtWlhKeVpXUmZkWE5sY201aGJXVWlPaUpoWkcxcGJpNWpkbTl5ZEdWNElpd2liRzlqWVd4bElqb2ljSFJmUWxJaUxDSm5hWFpsYmw5dVlXMWxJam9pWTNadmNuUmxlQ0lzSW1aaGJXbHNlVjl1WVcxbElqb2lZV1J0YVc0aUxDSmxiV0ZwYkNJNkltRmtiV2x1UUdOMmIzSjBaWGd1YVc4aWZRLkRkMjJqaXc2TUpnbm1NQ01maE9qQXNxMUFwem5NdzMwYnJQeExUVmFxVk9iTUNIOWh0WjhieTJ5UmltbTJLRDJ1c1p3VWZqbHJGTkRqejhZcURFTi1EX3Z3b09xWmw4clBCOV9sd093M2lSYlVSVFlpdlpSb1UtQm5ZZ0ZpR2xWbXdub3VMTkc3ekdzaVFpMDB1RzVZN2k5eXdxS3RlM3F3QmNmeFFjc2czQW50RG1nd1d3R3B1X09mcEhabGhnWnBmQlpzdUs4TlNyOWRtSGM2NkpWMWJlaV9obV9aQV83WUFZZHNyd3h2VzNiWjlrZ3hJNVhsaWE3MUsyZzY4ZDFYYlVncTkzZVJwcndSLXM4NGRsc204R2ZUc2xZbjVMM050MVFLYTlBWi1ReXQ2LVFJeUJfZWI3bi0xcmpMdmp1ZEtjYmtSa2xKUUpkUEFlV1VGSUdiQSJ9.CE46ckdqRBS13PzoQ6wWX-TtLlQ1sHSTSJSbz_pqeFmClZ4hnEQG3B7Dfl-Bwz2rxPe72xdiDti0Gv6vwx86DsqCQbg4bsacLr9zMor0fcHT5jt50XaBYi3fkgIYlpHWn7Cx_iP3JB3uofaHzS4zNyDG9LI9_9YKaKJ4yikkbh9M0N-cFIMoaIQyPS-oDZWgXIv6sSFz4n6TYkXlcQlIP159OwUt0rUGfsszNCidFik6c4aXeZw8CtxMX0nXC0bfP91xXgoQZ1j_JLglQmD3ihduT9iICuqHWaTDmxqPb3T8i3ZZL5xA5dFIMHTjnRRCu5KxhrEsF04b6rRlfsFTRQ"

  val scn: ScenarioBuilder = scenario("Retrieve event for workflows")
    .exec(
      http("Query from workflow bff" )
        .post("/graphql")
        .header("Authorization", token)
        .header("Content-Type","application/json")
        .body(StringBody("{\"query\":\"query{events{name}}\"}"))
        .check(status.is(200))).exec { session =>
    println(session)
    session
  }

  setUp(
    scn.inject(
      constantUsersPerSec(15) during (5)
    )
  ).protocols(httpProtocol)

}
